---
title: 'PRJCT'
author: 'MickaÃ«l Canouil, *Ph.D.*'
date: '`r format(Sys.time(), "%B %d, %Y (%Hh%M)")`'
monofont: 'Source Code Pro'
monofontoptions: 'Scale=0.7'
params:
  output_code: FALSE
  n_cores: !r parallel::detectCores()
  dpi: 120
  gg_fontsize: 12
  theme_dark: TRUE
output:
  bookdown::html_document2:
    theme: simplex
    toc: true
    toc_depth: 2
    toc_float: 
      collapsed: false
    fig_width: 6.3
    fig_height: 4.7
    number_sections: true
    self_contained: true
    mathjax: default
    df_print: kable
---

```{r setup, include = FALSE}
options(stringsAsFactors = FALSE)

script_name <- ''
project_directory <- '~/PRJCT'
working_directory <- paste0(project_directory, '/Data')
output_directory <- paste0(working_directory, script_name, sep = '/')

dir.create(paste0(output_directory, '/KnitrFiles/'), recursive = TRUE, showWarnings = FALSE, mode = '0777')


### Load packages
library(parallel)
library(grid)
library(tidyverse)
library(scales)

devtools::source_url('https://github.com/mcanouil/DEV/raw/master/R/theme_black.R')
devtools::source_url('https://github.com/mcanouil/DEV/raw/master/R/pretty_kable.R')


### Set knitr rmarkdown chunk options
knitr::opts_chunk$set(
  results = 'asis',
  dpi = params$dpi,
  include = TRUE,
  echo = params$output_code,
  warning = params$output_code,
  message = params$output_code,
  size = 'small',
  tidy = FALSE,
  crop = TRUE,
  autodep = TRUE,
  fig.align = 'center',
  fig.pos = '!H',
  cache = FALSE,
  cache.path = paste0(output_directory, '/KnitrFiles/'),
  fig.path = paste0(output_directory, '/KnitrFiles/')
)


### Define n_cores
n_cores <- params$n_cores


### Define theme
if (params$theme_dark) {
  theme_set(theme_black(base_size = params$gg_fontsize))
} else {
  theme_set(theme_light(base_size = params$gg_fontsize))
}
```
